# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Pipeline –¥–ª—è RAG

> **–î–∞—Ç–∞:** 2025-01-20 (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 2025-01-21)
> **–°—Ç–∞—Ç—É—Å:** –§–∞–∑—ã 1-5 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (v0.21-v0.25), –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Ñ–∞–∑—ã 6-9 –æ–∂–∏–¥–∞—é—Ç
> **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è Supabase Hybrid Search (FTS + pgvector)

---

## –ü—Ä–æ–±–ª–µ–º–∞

–¢–µ–∫—É—â–∏–π pipeline —Å–æ–∑–¥–∞—ë—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —á–∞–Ω–∫–∏ –∏–∑ **–æ—á–∏—â–µ–Ω–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞** (cleaned), —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—Ä–æ–±–ª–µ–º–∞–º:

| –ü—Ä–æ–±–ª–µ–º–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| **–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ** | LLM –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–æ–≥–æ–Ω–∞—Ö —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É |
| **–ù–µ—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–∏** | –ü–æ—Å–ª–µ–¥–Ω–∏–π —á–∞–Ω–∫ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å 900 —Å–ª–æ–≤ –≤–º–µ—Å—Ç–æ 100-300 |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü** | –í —Å–ø–ª–æ—à–Ω–æ–º —Ç–µ–∫—Å—Ç–µ —É—Å—Ç–Ω–æ–π —Ä–µ—á–∏ –Ω–µ—Ç —è–≤–Ω—ã—Ö —Ç–æ—á–µ–∫ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è |
| **–ü–æ—Ç–µ—Ä—è —Ç–µ—Ä–º–∏–Ω–æ–≤** | –ú–æ–¥–µ–ª–∏ –Ω–µ –≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –≥–ª–æ—Å—Å–∞—Ä–∏–π –ø—Ä–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö |

---

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π Pipeline (v0.25)

```
Transcribe ‚Üí Clean ‚îÄ‚î¨‚îÄ‚Üí Longread ‚Üí Summary ‚Üí Chunk (H2) ‚Üí Save  [educational]
                    ‚îî‚îÄ‚Üí Story ‚Üí Chunk (H2) ‚Üí Save               [leadership]
                              ‚Üì           ‚Üì
                        [–∏–∑ cleaned] [–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ]
```

**–†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

1. ‚úÖ **–ß–∞–Ω–∫–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ** ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ H2 –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑ LLM
2. ‚úÖ **–õ–æ–Ω–≥—Ä–∏–¥ –∏–∑ cleaned** ‚Äî –ø–æ–ª–Ω–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞
3. ‚úÖ **–ö–æ–Ω—Å–ø–µ–∫—Ç –∏–∑ cleaned** ‚Äî –≤–∏–¥–∏—Ç –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
4. ‚úÖ **–ì–ª–æ—Å—Å–∞—Ä–∏–π –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç LLM** ‚Äî –º–æ–¥–µ–ª—å —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏ –ø–æ —Å–º—ã—Å–ª—É

---

## –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ: Cleaned vs Longread –¥–ª—è RAG

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Cleaned Transcript | Longread |
|----------------|-------------------|----------|
| **–û–±—ä—ë–º** | 85-95% –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ | 70-85% –æ—Ç cleaned |
| **–§–æ—Ä–º–∞—Ç** | –°–ø–ª–æ—à–Ω–æ–π —Ç–µ–∫—Å—Ç | Markdown —Å H2/H3 –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ |
| **–ö–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞** | –í—Å—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ | –í—Å—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ (—É–±—Ä–∞–Ω —Ç–æ–ª—å–∫–æ —à—É–º) |
| **–ü–æ–≤—Ç–æ—Ä—ã** | –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã | –£–¥–∞–ª–µ–Ω—ã |
| **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** | –°—Ä–µ–¥–Ω—è—è (—É—Å—Ç–Ω–∞—è —Ä–µ—á—å) | –í—ã—Å–æ–∫–∞—è (—Å—Ç–∞—Ç—å—è) |
| **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —á–∞–Ω–∫–æ–≤** | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | –Ø–≤–Ω–∞—è (–∑–∞–≥–æ–ª–æ–≤–∫–∏) |

### –î–ª—è Supabase Hybrid Search

**FTS (tsvector):** —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º ‚Äî –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã —Ç–µ—Ä–º–∏–Ω—ã –±—ã–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ (–∏–∑ –≥–ª–æ—Å—Å–∞—Ä–∏—è).

**Vector (pgvector):** –∫–∞—á–µ—Å—Ç–≤–æ embeddings –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:
- –°–≤—è–∑–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ —á–∞–Ω–∫–∞
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏—è "—à—É–º–∞" (–ø–æ–≤—Ç–æ—Ä–æ–≤, –æ–≥–æ–≤–æ—Ä–æ–∫)
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç–∏

**–í—ã–≤–æ–¥:** Longread –¥–∞—ë—Ç –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ embeddings –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ.

### –ö–æ–º–ø—Ä–æ–º–∏—Å—Å

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Cleaned | Longread |
|----------|---------|----------|
| –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —á–∞–Ω–∫–æ–≤ | ‚ùå –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ (LLM) | ‚úÖ –ü–æ H2/H3 (–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ) |
| –ö–∞—á–µ—Å—Ç–≤–æ embeddings | ‚ö†Ô∏è –®—É–º —Å–Ω–∏–∂–∞–µ—Ç | ‚úÖ –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç |
| –ü–æ–ª–Ω–æ—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ | ‚úÖ 100% | ‚úÖ ~95% (—É–±—Ä–∞–Ω —Ç–æ–ª—å–∫–æ —à—É–º) |
| –¢–æ—á–Ω–æ—Å—Ç—å —Ü–∏—Ç–∞—Ç | ‚úÖ –î–æ—Å–ª–æ–≤–Ω–æ | ‚ö†Ô∏è –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–æ |

**–†–µ—à–µ–Ω–∏–µ:** –ß–∞–Ω–∫—É–µ–º longread, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º cleaned –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –¥–æ—Å–ª–æ–≤–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞.

---

## –¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ù–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö Herbalife –¥–≤–∞ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏:

| –¢–∏–ø | –í—ã—Ö–æ–¥–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã | –ò—Å—Ç–æ—á–Ω–∏–∫ —á–∞–Ω–∫–æ–≤ | –ü—Ä–æ–º–ø—Ç—ã |
|-----|-------------------|-----------------|---------|
| **–û–±—É—á–∞—é—â–∞—è —Ç–µ–º–∞** | –õ–æ–Ω–≥—Ä–∏–¥ + –ö–æ–Ω—Å–ø–µ–∫—Ç | –õ–æ–Ω–≥—Ä–∏–¥ | `longread/educational_*` + `summary/*` |
| **–õ–∏–¥–µ—Ä—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è** | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Å–ø–µ–∫—Ç | –ö–æ–Ω—Å–ø–µ–∫—Ç –∏—Å—Ç–æ—Ä–∏–∏ | `longread/leadership_*` |

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ –≤ ParseStage (—Å–º. –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∏–∂–µ)
- –ü—Ä–∏ –Ω–µ—Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–µ ‚Äî –æ—à–∏–±–∫–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏ —á–µ—Ä–µ–∑ SMB)

---

## –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–π Pipeline

```
                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                         ‚îÇ  –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è  ‚îÇ
                         ‚îÇ    (Whisper)    ‚îÇ
                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                  ‚îÇ
                                  ‚ñº
                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                         ‚îÇ     –û—á–∏—Å—Ç–∫–∞     ‚îÇ
                         ‚îÇ (—Ç–µ—Ä–º–∏–Ω—ã + –º—É—Å–æ—Ä)‚îÇ
                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                  ‚îÇ
                    ‚îå ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îº ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îê
                    ‚ïé             ‚ñº             ‚ïé
                    ‚ïé  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ïé
                    ‚ïé  ‚îÇ  –°–ª–∞–π–¥—ã (optional)  ‚îÇ  ‚ïé
                    ‚ïé  ‚îÇ   vision ‚Üí text     ‚îÇ  ‚ïé
                    ‚ïé  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ïé
                    ‚îî ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îº ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îò
                                  ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ                           ‚îÇ
              content_type                content_type
              = educational               = leadership
                    ‚îÇ                           ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
         ‚îÇ                   ‚îÇ                  ‚îÇ
         ‚ñº                   ‚ñº                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –õ–æ–Ω–≥—Ä–∏–¥     ‚îÇ   ‚îÇ   –ö–æ–Ω—Å–ø–µ–∫—Ç    ‚îÇ   ‚îÇ  –õ–∏–¥–µ—Ä—Å–∫–∞—è    ‚îÇ
‚îÇ (—Å–≤–æ–±–æ–¥–Ω–∞—è    ‚îÇ   ‚îÇ  (—Ç–µ–∑–∏—Å—ã)     ‚îÇ   ‚îÇ   –ò—Å—Ç–æ—Ä–∏—è     ‚îÇ
‚îÇ  —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)   ‚îÇ   ‚îÇ               ‚îÇ   ‚îÇ (8 –±–ª–æ–∫–æ–≤)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                                       ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚îÇ  –ß–∞–Ω–∫–æ–≤–∞–Ω–∏–µ   ‚îÇ
               ‚îÇ  (–ø–æ H2,      ‚îÇ
               ‚îÇ   –±–µ–∑ LLM)    ‚îÇ
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚îÇ   Supabase    ‚îÇ
               ‚îÇ  (RAG + meta) ‚îÇ
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –≠—Ç–∞–ø | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|------|------|-------|
| **–û—á–∏—Å—Ç–∫–∞** | Regex –≥–ª–æ—Å—Å–∞—Ä–∏–π + LLM –ø–∞—Ä–∞–∑–∏—Ç—ã | LLM —Å –≥–ª–æ—Å—Å–∞—Ä–∏–µ–º –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ (—É–º–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ) |
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è** | –û–¥–∏–Ω –ø—É—Ç—å –¥–ª—è –≤—Å–µ—Ö | –í–µ—Ç–≤–ª–µ–Ω–∏–µ –ø–æ content_type |
| **–õ–æ–Ω–≥—Ä–∏–¥** | –ò–∑ —á–∞–Ω–∫–æ–≤, –±–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç | –ò–∑ cleaned, —à–∞–±–ª–æ–Ω + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ |
| **–ö–æ–Ω—Å–ø–µ–∫—Ç** | –ò–∑ –ª–æ–Ω–≥—Ä–∏–¥–∞ | –ò–∑ cleaned (—Ç–æ–ª—å–∫–æ –¥–ª—è educational) |
| **–õ–∏–¥–µ—Ä—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è** | ‚Äî | –ù–æ–≤—ã–π —Ç–∏–ø: 8 –±–ª–æ–∫–æ–≤ –∏–∑ cleaned |
| **–ß–∞–Ω–∫–æ–≤–∞–Ω–∏–µ** | LLM –∏–∑ cleaned | –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–æ H2 (–µ–¥–∏–Ω—ã–π –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤) |

---

## –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 1. –û—á–∏—Å—Ç–∫–∞: –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≥–ª–æ—Å—Å–∞—Ä–∏–π –≤ LLM

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
1. –ì–ª–æ—Å—Å–∞—Ä–∏–π ‚Äî **Regex** (—Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∏–∑ `glossary.yaml`)
2. –ü–∞—Ä–∞–∑–∏—Ç—ã ‚Äî **LLM** (–ø—Ä–æ–º–ø—Ç `cleaner_system.md`)

**–ü—Ä–æ–±–ª–µ–º–∞ —Å Regex:** –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏:
- –í –≥–ª–æ—Å—Å–∞—Ä–∏–∏: `"–≥–µ—Ä–±–∞–ª–∞–π—Ñ"` ‚Üí `"Herbalife"`
- Whisper –≤—ã–¥–∞–ª: `"—Ö–µ—Ä–±–æ–ª–∞–π—Ñ"` –∏–ª–∏ `"—Ö–µ—Ä–±–∞–ª –ª–∞–π—Ñ"` ‚Äî Regex –Ω–µ –Ω–∞–π–¥—ë—Ç

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å `config/glossary.yaml` –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–Ω–µ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤ –ø—Ä–æ–º–ø—Ç).

#### –ü–æ—á–µ–º—É –≥–ª–æ—Å—Å–∞—Ä–∏–π –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ª—É—á—à–µ

–§–∞–π–ª `glossary.yaml` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è:

```yaml
- canonical: "Herbalife"              # –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ
  english: "Herbalife"                # –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç
  description: "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏"    # —Å–º—ã—Å–ª —Ç–µ—Ä–º–∏–Ω–∞
  variations:                          # –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏
    - "–≥–µ—Ä–±–∞–ª–∞–π—Ñ"
    - "—Ö–µ—Ä–±–∞–ª–∞–π—Ñ"
  context: "—Ä–∞–±–æ—Ç–∞—é –≤ Herbalife"      # –ø—Ä–∏–º–µ—Ä –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏
```

| –ê—Å–ø–µ–∫—Ç | –í—Å—Ç—Ä–æ–∏—Ç—å –≤ –ø—Ä–æ–º–ø—Ç | –ì–ª–æ—Å—Å–∞—Ä–∏–π –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç |
|--------|-------------------|------------------------|
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ | –ú–µ–Ω—è—Ç—å –ø—Ä–æ–º–ø—Ç | –ú–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ `glossary.yaml` |
| –ü–æ–Ω–∏–º–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ | –°–ø–∏—Å–æ–∫ –∑–∞–º–µ–Ω | –°–º—ã—Å–ª + –ø—Ä–∏–º–µ—Ä—ã + –≤–∞—Ä–∏–∞—Ü–∏–∏ |
| –ù–æ–≤—ã–µ –≤–∞—Ä–∏–∞—Ü–∏–∏ | –¢–æ–ª—å–∫–æ —è–≤–Ω—ã–µ | –ú–æ–¥–µ–ª—å –¥–æ–≥–∞–¥–∞–µ—Ç—Å—è –ø–æ —Å–º—ã—Å–ª—É |
| –†–∞–∑–º–µ—Ä –ø—Ä–æ–º–ø—Ç–∞ | –†–∞–∑–¥—É–≤–∞–µ—Ç—Å—è | –ß–∏—Å—Ç—ã–π, —Ñ–æ–∫—É—Å –Ω–∞ –∑–∞–¥–∞—á–µ |

#### –ß—Ç–æ –º–æ–¥–µ–ª—å —Å–º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å

–ò–º–µ—è `description` –∏ `context`, LLM —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –¥–∞–∂–µ **–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞—Ü–∏–∏**:
- `"—Ö–µ—Ä–±–æ–ª–∞–π—Ñ"` ‚Üí –ø–æ—Ö–æ–∂–µ –Ω–∞ Herbalife –ø–æ –∑–≤—É—á–∞–Ω–∏—é –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- `"—Ñ–æ—Ä–º—É–ª–∞ –ø–µ—Ä–≤–∞—è"` ‚Üí "–§–æ—Ä–º—É–ª–∞ 1" –ø–æ —Å–º—ã—Å–ª—É
- `"—Å—É–ø–µ—Ä –≤–∏–∑–æ—Ä"` ‚Üí "–°—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä" –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é —Ä–æ–ª–∏

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏

```
[–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç]     ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –æ—á–∏—Å—Ç–∫–∏ (—É–±—Ä–∞—Ç—å –ø–∞—Ä–∞–∑–∏—Ç—ã, –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Ä–º–∏–Ω—ã)
[–ì–ª–æ—Å—Å–∞—Ä–∏–π YAML]       ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª)
[–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç]           ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

### 2. –õ–æ–Ω–≥—Ä–∏–¥ –∏ –∫–æ–Ω—Å–ø–µ–∫—Ç: —à–∞–±–ª–æ–Ω + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (–≤–º–µ—Å—Ç–æ –µ–¥–∏–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞)

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ–∫—É—â–∏–π –ø—Ä–æ–º–ø—Ç —Å–º–µ—à–∏–≤–∞–µ—Ç "—á—Ç–æ –ø–æ–ª—É—á–∏—Ç—å" –∏ "–∫–∞–∫ –¥–µ–ª–∞—Ç—å" –≤ –æ–¥–Ω–æ–º —Ç–µ–∫—Å—Ç–µ.

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞:
- **–®–∞–±–ª–æ–Ω** ‚Äî –≤–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—á—Ç–æ –æ–∂–∏–¥–∞–µ—Ç—Å—è)
- **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–∫–∞–∫ –¥–æ—Å—Ç–∏—á—å)

#### –ü–æ—á–µ–º—É —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª—É—á—à–µ –µ–¥–∏–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

| –ê—Å–ø–µ–∫—Ç | –ï–¥–∏–Ω—ã–π –ø—Ä–æ–º–ø—Ç | –®–∞–±–ª–æ–Ω + –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ |
|--------|---------------|---------------------|
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ | –û–ø–∏—Å–∞–Ω–∞ —Å–ª–æ–≤–∞–º–∏ | –ü–æ–∫–∞–∑–∞–Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ |
| –ü—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ | –°–º–µ—à–∞–Ω—ã —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π | –û—Ç–¥–µ–ª—å–Ω–æ |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ | –ú–µ–Ω—è—Ç—å –≤–µ—Å—å –ø—Ä–æ–º–ø—Ç | –ú–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—É—é —á–∞—Å—Ç—å |
| –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –ù–µ—Ç | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ |
| –ü–æ–Ω–∏–º–∞–Ω–∏–µ –º–æ–¥–µ–ª—å—é | "–ß—Ç–æ" –∏ "–∫–∞–∫" —Å–º–µ—à–∞–Ω—ã | –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ |

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

```
[–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏]     ‚Äî –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å
[–®–∞–±–ª–æ–Ω]         ‚Äî —á—Ç–æ –ø–æ–ª—É—á–∏—Ç—å (—Ü–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
[–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç]     ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

–ú–æ–¥–µ–ª—å –ø–æ–Ω–∏–º–∞–µ—Ç –∑–∞–¥–∞—á—É –∫–∞–∫: "–∑–∞–ø–æ–ª–Ω–∏ —à–∞–±–ª–æ–Ω –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –∏–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π".

#### –§–∞–π–ª—ã —à–∞–±–ª–æ–Ω–æ–≤

**–î–ª—è –ª–æ–Ω–≥—Ä–∏–¥–∞:**
- `docs/template prompts/Educational_Longread_Instructions.md` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ —Ä–µ–¥–∞–∫—Ç—É—Ä—ã
- `docs/template prompts/Educational_Longread_Template.md` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–î–ª—è –∫–æ–Ω—Å–ø–µ–∫—Ç–∞:**
- `docs/template prompts/Educational_Summary_Instructions.md` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ —Å–∂–∞—Ç–∏—è
- `docs/template prompts/Educational_Summary_Template.md` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞

**–î–ª—è –ª–∏–¥–µ—Ä—Å–∫–æ–π –∏—Å—Ç–æ—Ä–∏–∏:**
- `docs/template prompts/Leadership_Story_Instructions.md` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏
- `docs/template prompts/Leadership_Story_Template.md` ‚Äî —à–∞–±–ª–æ–Ω 8 –±–ª–æ–∫–æ–≤

**–ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:**
- –ö–∞–∂–¥—ã–π —Ä–∞–∑–¥–µ–ª —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω (–ø–æ–Ω—è—Ç–µ–Ω –±–µ–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö)
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ H2/H3 –æ—Ç—Ä–∞–∂–∞—é—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- RAG-ready by design

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –¢–µ–∫—É—â–∏–µ —à–∞–±–ª–æ–Ω—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Claude Desktop (—Ä—É—á–Ω–æ–π —Ä–µ–∂–∏–º). –ü—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ pipeline (–§–∞–∑—ã 3-4: –ª–æ–Ω–≥—Ä–∏–¥, –∫–æ–Ω—Å–ø–µ–∫—Ç, –∏—Å—Ç–æ—Ä–∏—è) –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã ‚Äî —Å–º. [System_Prompts_Examples.md](../template%20prompts/System_Prompts_Examples.md).

### 3. –ö–æ–Ω—Å–ø–µ–∫—Ç: –∏–∑ cleaned, –Ω–µ –∏–∑ longread

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –¥–µ–ª–∞—Ç—å –∫–æ–Ω—Å–ø–µ–∫—Ç –∏–∑ –ª–æ–Ω–≥—Ä–∏–¥–∞, –ø–æ–ª—É—á–∞–µ—Ç—Å—è "–∫–æ–ø–∏—è –∫–æ–ø–∏–∏" ‚Äî —Ç–µ—Ä—è—é—Ç—Å—è –¥–µ—Ç–∞–ª–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ö–æ–Ω—Å–ø–µ–∫—Ç —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –∏–∑ cleaned transcript:
- –í–∏–¥–∏—Ç –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
- –ù–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ä–µ–¥–∞–∫—Ç—É—Ä–æ–π –ª–æ–Ω–≥—Ä–∏–¥–∞
- –ü–∞—Ä–∞–ª–ª–µ–ª–µ–Ω –ª–æ–Ω–≥—Ä–∏–¥—É, –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ–≥–æ

### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è: —É–±—Ä–∞—Ç—å –≥–ª–æ—Å—Å–∞—Ä–∏–π –∏–∑ –ø—Ä–æ–º–ø—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ —ç—Ç–∞–ø—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–ª–æ–Ω–≥—Ä–∏–¥, –∫–æ–Ω—Å–ø–µ–∫—Ç, –∏—Å—Ç–æ—Ä–∏—è) –¥–æ–ª–∂–Ω—ã –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ—Ä–º–∏–Ω—ã ‚Äî –º–æ–¥–µ–ª—å —Ç–µ—Ä—è–µ—Ç —Ñ–æ–∫—É—Å.

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–∞–ø –æ—á–∏—Å—Ç–∫–∏ —É–∂–µ –∏—Å–ø—Ä–∞–≤–∏–ª —Ç–µ—Ä–º–∏–Ω—ã ‚Üí –≤—Å–µ —ç—Ç–∞–ø—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —á–∏—Å—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º –∏ —Ñ–æ–∫—É—Å–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–≤–æ–∏—Ö –∑–∞–¥–∞—á–∞—Ö:
- **–õ–æ–Ω–≥—Ä–∏–¥:** —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (H2/H3), —Ä–µ–¥–∞–∫—Ç—É—Ä–∞, —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞–∑–¥–µ–ª–æ–≤
- **–ö–æ–Ω—Å–ø–µ–∫—Ç:** —Å–∂–∞—Ç–∏–µ, –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∑–∏—Å–æ–≤
- **–ò—Å—Ç–æ—Ä–∏—è:** –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ 8 –±–ª–æ–∫–æ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ö–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å –¥–µ–ª–∞–µ—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É —Ö–æ—Ä–æ—à–æ
- –¢–µ—Ä–º–∏–Ω—ã —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –≥–ª–æ—Å—Å–∞—Ä–∏–π
- –ü—Ä–æ–º–ø—Ç—ã –ø—Ä–æ—â–µ ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ

### 5. –û—Ü–µ–Ω–∫–∞ —Å–∂–∞—Ç–∏—è –ª–æ–Ω–≥—Ä–∏–¥–∞

**–†–∞–Ω–µ–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª–æ—Å—å:** 40-60% –æ—Ç cleaned (–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ—Ç–µ—Ä—è).

**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:** 70-85% –æ—Ç cleaned.

**–ß—Ç–æ —É–±–∏—Ä–∞–µ—Ç—Å—è (—à—É–º, 15-30%):**
- –°–ª–æ–≤–∞-–ø–∞—Ä–∞–∑–∏—Ç—ã: 5-10%
- –ü–æ–≤—Ç–æ—Ä—ã –æ–¥–Ω–æ–π –º—ã—Å–ª–∏: 5-15%
- –û–≥–æ–≤–æ—Ä–∫–∏: 2-5%
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–µ ("–ü–æ–¥–Ω–∏–º–∏—Ç–µ —Ä—É–∫–∏"): 2-5%

**–ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è):**
- –í–°–ï –∫–ª—é—á–µ–≤—ã–µ –º—ã—Å–ª–∏ –∏ —Ç–µ–∑–∏—Å—ã
- –ü—Ä–∏–º–µ—Ä—ã –∏ –∏—Å—Ç–æ—Ä–∏–∏ –° –î–ï–¢–ê–õ–Ø–ú–ò
- –¶–∏—Ñ—Ä—ã, –Ω–∞–∑–≤–∞–Ω–∏—è, –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞
- –û–±—ä—è—Å–Ω–µ–Ω–∏—è ¬´–ø–æ—á–µ–º—É¬ª –∏ ¬´–∑–∞—á–µ–º¬ª

–£–±–∏—Ä–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏, –Ω–∏ –ø—Ä–∏ RAG.

### 6. –ß–∞–Ω–∫–æ–≤–∞–Ω–∏–µ: –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º

**–ü—Ä–æ–±–ª–µ–º–∞:** LLM-—á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞—Ä—å–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–æ–≥–æ–Ω–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –ü–∞—Ä—Å–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É longread –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —á–∞–Ω–∫–∏ –ø–æ H2/H3:

```python
def chunk_by_headers(longread_md: str) -> list[Chunk]:
    """–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º."""
    sections = re.split(r'^## ', longread_md, flags=re.MULTILINE)
    chunks = []
    for section in sections:
        if not section.strip():
            continue
        # –ò–∑–≤–ª–µ—á—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç
        lines = section.split('\n', 1)
        title = lines[0].strip()
        content = lines[1].strip() if len(lines) > 1 else ""
        chunks.append(Chunk(title=title, text=content))
    return chunks
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- 100% –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç LLM-–≤—ã–∑–æ–≤–∞
- –ì—Ä–∞–Ω–∏—Ü—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∞–≤—Ç–æ—Ä–æ–º –ª–æ–Ω–≥—Ä–∏–¥–∞

---

## –°–ª–∞–π–¥—ã (–Ω–∞ –±—É–¥—É—â–µ–µ)

### –ü—Ä–æ–±–ª–µ–º–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

26 —Å–ª–∞–π–¥–æ–≤ √ó ~2 –ú–ë = 50 –ú–ë –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ‚Üí ~35 000 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
–î–∞–∂–µ Claude —Å 200K –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.

### –†–µ—à–µ–Ω–∏–µ: –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ

```
slides/*.jpg ‚Üí Slides Extraction ‚Üí slides_extracted.md (~2000 —Ç–æ–∫–µ–Ω–æ–≤)
                                          ‚Üì
                    cleaned.txt + slides_extracted.md ‚Üí Longread
```

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —É–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã: `docs/template prompts/Slides_Extraction_Instructions.md`

### Pipeline —Å–æ —Å–ª–∞–π–¥–∞–º–∏

```
Transcribe ‚Üí Clean ‚Üí [Slides Extract] ‚Üí Longread ‚Üí Chunk ‚Üí RAG
                 ‚Üì                          ‚Üë
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
                         Summary
```

–°–ª–∞–π–¥—ã ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.

---

## –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –û–±–ª–∞—á–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Claude)

–õ–æ–Ω–≥—Ä–∏–¥ –∏ –∫–æ–Ω—Å–ø–µ–∫—Ç –º–æ–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** ‚Äî –æ–±–∞ –∑–∞–≤–∏—Å—è—Ç —Ç–æ–ª—å–∫–æ –æ—Ç cleaned.

### –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Ollama)

–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–µ –¥–∞—ë—Ç –≤—ã–∏–≥—Ä—ã—à–∞:
- GPU –æ–¥–∏–Ω, –∑–∞–ø—Ä–æ—Å—ã —Å—Ç–æ—è—Ç –≤ –æ—á–µ—Ä–µ–¥–∏
- –†–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á —Å–æ–∑–¥–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.

---

## –¢–∏–ø—ã –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –∏ –≤—Ö–æ–¥–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

| –¢–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è | –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å | –í—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç | –ê—É–¥–∏—Ç–æ—Ä–∏—è | –í–∏–¥–µ–æ –≤ YouTube |
|-----------------|---------------|----------------|-----------|-----------------|
| **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ —à–∫–æ–ª—ã (–ü–®)** | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ | –í–∏–¥–µ–æ (Zoom) | –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç—ã | ‚úÖ –î–∞ |
| **–í—ã–µ–∑–¥–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è** | 3-5 —Ä–∞–∑/–≥–æ–¥ | –ê—É–¥–∏–æ (–∑–∞–ø–∏—Å—å –∏–∑ –∑–∞–ª–∞) | –õ–∏–¥–µ—Ä—ã | ‚ùå –ù–µ—Ç |

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
- **–í–∏–¥–µ–æ (–ü–®):** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ ffmpeg ‚Üí Whisper (–ª–æ–∫–∞–ª—å–Ω—ã–π Whisper –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é)
- **–ê—É–¥–∏–æ (–≤—ã–µ–∑–¥–Ω—ã–µ):** –ù–∞–ø—Ä—è–º—É—é –≤ Whisper (–±–µ–∑ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ö–∏–≤–∞

### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ —à–∫–æ–ª—ã (–ü–®)

–ü–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

```
archive/2026/
‚îî‚îÄ‚îÄ –ü–®/
    ‚îî‚îÄ‚îÄ 01.13/
        ‚îú‚îÄ‚îÄ SV –ó–∞–∫—Ä—ã—Ç–∏–µ –ü–û, –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è (–ö—É—Ö–∞—Ä–µ–Ω–∫–æ –ñ–µ–Ω—è)/
        ‚îÇ   ‚îú‚îÄ‚îÄ transcript.txt
        ‚îÇ   ‚îú‚îÄ‚îÄ cleaned.txt
        ‚îÇ   ‚îú‚îÄ‚îÄ longread.md           # educational
        ‚îÇ   ‚îú‚îÄ‚îÄ summary.md
        ‚îÇ   ‚îî‚îÄ‚îÄ slides/               # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
        ‚îÇ
        ‚îî‚îÄ‚îÄ –ù–ü –ü–µ—Ä–≤—ã–µ —à–∞–≥–∏ (–ò–≤–∞–Ω–æ–≤ –ü—ë—Ç—Ä)/
            ‚îî‚îÄ‚îÄ ...
```

**–ò–º—è –ø–∞–ø–∫–∏:** `{–ß–∞—Å—Ç—å} {–¢–µ–º–∞} ({–°–ø–∏–∫–µ—Ä –ò–º—è})`
- –ß–∞—Å—Ç—å: SV (—Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä—ã) –∏–ª–∏ –ù–ü (–Ω–æ–≤—ã–µ –ø–∞—Ä—Ç–Ω—ë—Ä—ã)
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞

### –í—ã–µ–∑–¥–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è

–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º, —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:

```
archive/2026/
‚îî‚îÄ‚îÄ –í—ã–µ–∑–¥–Ω—ã–µ/
    ‚îî‚îÄ‚îÄ 01 –§–æ—Ä—É–º TABTeam (–ú–æ—Å–∫–≤–∞)/
        ‚îú‚îÄ‚îÄ –ê–Ω—Ç–æ–Ω–æ–≤—ã (–î–º–∏—Ç—Ä–∏–π –∏ –Æ–ª–∏—è)/         # leadership
        ‚îÇ   ‚îú‚îÄ‚îÄ transcript.txt
        ‚îÇ   ‚îú‚îÄ‚îÄ cleaned.txt
        ‚îÇ   ‚îî‚îÄ‚îÄ story.md                        # 8 –±–ª–æ–∫–æ–≤
        ‚îÇ
        ‚îú‚îÄ‚îÄ –ú–µ–∫–∏–±–µ–ª—å ‚Äî –ú–æ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç—ã.../        # educational
        ‚îÇ   ‚îú‚îÄ‚îÄ transcript.txt
        ‚îÇ   ‚îú‚îÄ‚îÄ cleaned.txt
        ‚îÇ   ‚îú‚îÄ‚îÄ longread.md
        ‚îÇ   ‚îî‚îÄ‚îÄ summary.md
        ‚îÇ
        ‚îî‚îÄ‚îÄ slides/                             # –æ–±—â–∏–µ —Å–ª–∞–π–¥—ã –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
```

**–ò–º—è –ø–∞–ø–∫–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:** `{–ú–ú} {–ù–∞–∑–≤–∞–Ω–∏–µ} ({–ì–æ—Ä–æ–¥})`

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ –∏–º–µ–Ω–∏

| –ü–∞—Ç—Ç–µ—Ä–Ω | content_type | –ü—Ä–∏–º–µ—Ä—ã |
|---------|--------------|---------|
| `–§–∞–º–∏–ª–∏—è (–ò–º—è)` –∏–ª–∏ `–§–∞–º–∏–ª–∏—è (–ò–º—è –∏ –ò–º—è)` | leadership | "–ê–Ω—Ç–æ–Ω–æ–≤—ã (–î–º–∏—Ç—Ä–∏–π –∏ –Æ–ª–∏—è)" |
| `–§–∞–º–∏–ª–∏—è ‚Äî –ù–∞–∑–≤–∞–Ω–∏–µ` | educational | "–ú–µ–∫–∏–±–µ–ª—å ‚Äî –ú–æ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç—ã..." |
| `{–ß–∞—Å—Ç—å} {–¢–µ–º–∞} ({–°–ø–∏–∫–µ—Ä})` | educational | "SV –ó–∞–∫—Ä—ã—Ç–∏–µ –ü–û (–ö—É—Ö–∞—Ä–µ–Ω–∫–æ)" |

### –í—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞

| content_type | –§–∞–π–ª—ã | –ò—Å—Ç–æ—á–Ω–∏–∫ —á–∞–Ω–∫–æ–≤ |
|--------------|-------|-----------------|
| educational | `longread.md` + `summary.md` | longread.md |
| leadership | `story.md` | story.md |

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞

```
{–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞}/
‚îú‚îÄ‚îÄ transcript.txt          # —Å—ã—Ä–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç (Whisper)
‚îú‚îÄ‚îÄ cleaned.txt             # –æ—á–∏—â–µ–Ω–Ω—ã–π (–∑–æ–ª–æ—Ç–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫)
‚îú‚îÄ‚îÄ longread.md             # –¥–ª—è educational
‚îú‚îÄ‚îÄ summary.md              # –¥–ª—è educational
‚îú‚îÄ‚îÄ story.md                # –¥–ª—è leadership (8 –±–ª–æ–∫–æ–≤)
‚îú‚îÄ‚îÄ slides/                 # —Ñ–æ—Ç–æ —Å–ª–∞–π–¥–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ slide_001.jpg
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ slides_extracted.md     # —Ç–µ–∫—Å—Ç —Å–æ —Å–ª–∞–π–¥–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îî‚îÄ‚îÄ .cache/                 # –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    ‚îú‚îÄ‚îÄ manifest.json
    ‚îî‚îÄ‚îÄ ...
```

---

## –í—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**API:** Step API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç override –º–æ–¥–µ–ª–∏:

```python
class StepCleanRequest(BaseModel):
    model: str | None = None  # ‚úÖ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –º–æ–¥–µ–ª—å —á–µ—Ä–µ–∑ API
    # prompt_variant: ???     # ‚ùå –ø—Ä–æ–º–ø—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω
```

**UI:** –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:
- –ú–æ–¥–µ–ª–∏ –∑–∞–¥–∞—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ –≤ –æ–∫–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω)
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ —ç—Ç–∞–ø–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å/–ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

**–ü—Ä–æ–º–ø—Ç—ã:** –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ docker-–æ–±—Ä–∞–∑ (`config/prompts/`), –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –¥–µ–ø–ª–æ—è.

### –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: –≤–Ω–µ—à–Ω—è—è –ø–∞–ø–∫–∞ –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤

–í—ã–Ω–µ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤ –ø–∞–ø–∫—É —Å SMB-–¥–æ—Å—Ç—É–ø–æ–º:

```
/mnt/main/work/bz2/video/prompts/           # SMB –¥–æ—Å—Ç—É–ø —Å Mac
‚îú‚îÄ‚îÄ cleaning/
‚îÇ   ‚îú‚îÄ‚îÄ default.md                    # —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–º–ø—Ç
‚îÇ   ‚îú‚îÄ‚îÄ with_glossary.md              # –≥–ª–æ—Å—Å–∞—Ä–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
‚îÇ   ‚îî‚îÄ‚îÄ minimal.md                    # —Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–∑–∏—Ç—ã
‚îú‚îÄ‚îÄ longread/
‚îÇ   ‚îú‚îÄ‚îÄ default.md                    # —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–º–ø—Ç
‚îÇ   ‚îî‚îÄ‚îÄ extended/                     # —à–∞–±–ª–æ–Ω + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
‚îÇ       ‚îú‚îÄ‚îÄ instructions.md
‚îÇ       ‚îî‚îÄ‚îÄ template.md
‚îú‚îÄ‚îÄ summary/
‚îÇ   ‚îú‚îÄ‚îÄ default.md
‚îÇ   ‚îî‚îÄ‚îÄ extended/
‚îÇ       ‚îú‚îÄ‚îÄ instructions.md
‚îÇ       ‚îî‚îÄ‚îÄ template.md
‚îú‚îÄ‚îÄ chunker/
‚îÇ   ‚îî‚îÄ‚îÄ default.md
‚îî‚îÄ‚îÄ glossary.yaml                     # –≥–ª–æ—Å—Å–∞—Ä–∏–π —Ç–æ–∂–µ –∑–¥–µ—Å—å
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–Ω–µ—à–Ω–µ–π –ø–∞–ø–∫–∏

| –ê—Å–ø–µ–∫—Ç | –°–µ–π—á–∞—Å (–≤ –æ–±—Ä–∞–∑–µ) | –í–Ω–µ—à–Ω—è—è –ø–∞–ø–∫–∞ |
|--------|-------------------|---------------|
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ | –î–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç–∞ | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª |
| A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | –¢—Ä–µ–±—É–µ—Ç —Å–±–æ—Ä–∫–∏ | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ |
| –î–æ—Å—Ç—É–ø | SSH + vim | SMB + –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä |
| –ò—Ç–µ—Ä–∞—Ü–∏–∏ | –ú–µ–¥–ª–µ–Ω–Ω—ã–µ | –ë—ã—Å—Ç—Ä—ã–µ |

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

**docker-compose.yml:**
```yaml
volumes:
  - /mnt/main/work/bz2/video:/data
  - /mnt/main/work/bz2/video/prompts:/prompts  # –Ω–æ–≤—ã–π volume
```

**Settings:**
```python
prompts_dir: Path = Path("/prompts")      # –≤–Ω–µ—à–Ω—è—è –ø–∞–ø–∫–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
config_dir: Path = Path("/app/config")    # fallback –Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ
```

**–ó–∞–≥—Ä—É–∑–∫–∞ —Å fallback:**
```python
def load_prompt(stage: str, variant: str = "default") -> str:
    """Load prompt from external folder with fallback to built-in."""
    # 1. –í–Ω–µ—à–Ω—è—è –ø–∞–ø–∫–∞: /prompts/{stage}/{variant}.md
    external = prompts_dir / stage / f"{variant}.md"
    if external.exists():
        return external.read_text()

    # 2. Fallback: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ –æ–±—Ä–∞–∑
    builtin = config_dir / "prompts" / f"{stage}_{variant}.md"
    if builtin.exists():
        return builtin.read_text()

    # 3. Default fallback
    return (config_dir / "prompts" / f"{stage}.md").read_text()
```

### Step API —Å –≤—ã–±–æ—Ä–æ–º –ø—Ä–æ–º–ø—Ç–∞

```python
class StepCleanRequest(BaseModel):
    model: str | None = None
    prompt_variant: str | None = Field(
        default="default",
        description="Prompt variant from /prompts/cleaning/{variant}.md"
    )
```

**Workflow —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. –°–æ–∑–¥–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç –≤ `/prompts/cleaning/experiment.md` —á–µ—Ä–µ–∑ SMB
2. –ù–æ–≤—ã–π —Ñ–∞–π–ª —Å—Ä–∞–∑—É –ø–æ—è–≤–∏—Ç—Å—è –≤ UI (API —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–∞–ø–∫—É –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
3. –í—ã–±—Ä–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É
4. –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å `default`, –ø—Ä–∏ —É—Å–ø–µ—Ö–µ ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –≤–∞—Ä–∏–∞–Ω—Ç

#### –ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏

```python
def load_prompt(name: str, model: str = None, variant: str = None):
    # –ü–æ—Ä—è–¥–æ–∫ –ø–æ–∏—Å–∫–∞:
    # 1. {name}_{variant}_{model_family}.md
    # 2. {name}_{variant}.md
    # 3. {name}_{model_family}.md
    # 4. {name}.md (fallback)
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

| –ê—Å–ø–µ–∫—Ç | –¢–æ–ª—å–∫–æ model | model + prompt_variant |
|--------|--------------|------------------------|
| –ì–∏–±–∫–æ—Å—Ç—å | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è |
| –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã | –°–ª–æ–∂–Ω–æ | –õ–µ–≥–∫–æ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å |
| –û—Ç–∫–∞—Ç | –¢–æ–ª—å–∫–æ –º–æ–¥–µ–ª—å | –ú–æ–¥–µ–ª—å + –ø—Ä–æ–º–ø—Ç |
| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | –û–¥–Ω–æ–º–µ—Ä–Ω–∞—è | –î–≤—É–º–µ—Ä–Ω–∞—è (–º–æ–¥–µ–ª—å √ó –ø—Ä–æ–º–ø—Ç) |

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–π—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∏ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞.

---

## –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å** –ø—Ä–æ–µ–∫—Ç–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:

1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ `docs/` –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Ñ–∞–∑—ã
2. –û–±–Ω–æ–≤–∏—Ç—å `CLAUDE.md` –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∫–æ–º–∞–Ω–¥—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–ª–∏ API
3. –°–æ–∑–¥–∞—Ç—å ADR –µ—Å–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
4. –°–ª–µ–¥–æ–≤–∞—Ç—å [DOCUMENTATION_GUIDELINES.md](../DOCUMENTATION_GUIDELINES.md)

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

### –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ **—á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É**, –∞ –Ω–µ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏:
- –£–¥–∞–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥, –∞ –Ω–µ –ø–æ–º–µ—á–∞—Ç—å `@deprecated`
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã –∏ –º–µ—Ç–æ–¥—ã, –µ—Å–ª–∏ –Ω–æ–≤–æ–µ –∏–º—è —Ç–æ—á–Ω–µ–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –ù–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ç–∞—Ä—ã–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã "–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π"
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞

–≠—Ç–æ —É–ø—Ä–æ—Å—Ç–∏—Ç –¥–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞.

---

## –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

> –ö–∞–∂–¥–∞—è —Ñ–∞–∑–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –æ–¥–Ω—É —Å–µ—Å—Å–∏—é.
>
> –ü—Ä–æ–º–ø—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–∑–∞ (`config/prompts/`), –º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –¥–µ–ø–ª–æ–π.

### –§–∞–∑–∞ 1: –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ö–∏–≤–∞ ‚úÖ (v0.21)

> –¶–µ–ª—å: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π

1. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å `ContentType`** ‚Äî enum `educational | leadership` –≤ schemas.py
2. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å `EventCategory`** ‚Äî enum `regular | offsite` —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ "–ü–®" –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
3. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å ParseStage** ‚Äî –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ content_type –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º; –æ—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–µ—Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–º
4. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å SaveStage** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ö–∏–≤–∞ –ø–æ event_category –∏ content_type

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- [schemas.py:28-46](../../backend/app/models/schemas.py#L28-L46) ‚Äî `ContentType`, `EventCategory` enums
- [schemas.py:49-78](../../backend/app/models/schemas.py#L49-L78) ‚Äî `VideoMetadata` —Å `content_type`, `event_category`, `event_name`, computed `is_offsite`
- [parser.py:44-82](../../backend/app/services/parser.py#L44-L82) ‚Äî Regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è regular/offsite —Å–æ–±—ã—Ç–∏–π
- [parser.py:221-244](../../backend/app/services/parser.py#L221-L244) ‚Äî `detect_content_type_from_filename()` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞
- [parser.py:302-423](../../backend/app/services/parser.py#L302-L423) ‚Äî `_parse_regular_event()` –∏ `_parse_offsite_event()` ‚Äî —Ä–∞–∑–¥–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –∞—Ä—Ö–∏–≤–Ω—ã–º–∏ –ø—É—Ç—è–º–∏

### –§–∞–∑–∞ 2: –û—á–∏—Å—Ç–∫–∞ —Å –≥–ª–æ—Å—Å–∞—Ä–∏–µ–º ‚úÖ (v0.22)

> –¶–µ–ª—å: –≥–ª–æ—Å—Å–∞—Ä–∏–π –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç LLM –≤–º–µ—Å—Ç–æ regex-–∑–∞–º–µ–Ω

5. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å CleanStage** ‚Äî –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å glossary.yaml –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –ø—Ä–æ–º–ø—Ç
6. ‚úÖ **–£–±—Ä–∞—Ç—å regex-–∑–∞–º–µ–Ω—ã** ‚Äî —É–¥–∞–ª–∏—Ç—å apply_glossary() –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–º–µ–Ω (LLM –Ω–µ –¥–∞—ë—Ç —Ç–æ—á–Ω–æ–≥–æ –ø–æ–¥—Å—á—ë—Ç–∞)
7. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç –æ—á–∏—Å—Ç–∫–∏** ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –≥–ª–æ—Å—Å–∞—Ä–∏–µ–º
8. ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ cleaner.py –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–æ–≤

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- [cleaner.py:61-72](../../backend/app/services/cleaner.py#L61-L72) ‚Äî `_load_glossary_text()` –∑–∞–≥—Ä—É–∂–∞–µ—Ç glossary.yaml –∫–∞–∫ —Ç–µ–∫—Å—Ç
- [cleaner.py:116-118](../../backend/app/services/cleaner.py#L116-L118) ‚Äî –≥–ª–æ—Å—Å–∞—Ä–∏–π –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ user_template —á–µ—Ä–µ–∑ `{glossary}`
- [cleaner_system.md](../../config/prompts/cleaner_system.md) ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≥–ª–æ—Å—Å–∞—Ä–∏–µ–º" (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–æ –∑–≤—É—á–∞–Ω–∏—é, —Å–º—ã—Å–ª—É)
- [cleaner_user.md](../../config/prompts/cleaner_user.md) ‚Äî —à–∞–±–ª–æ–Ω —Å `<glossary>{glossary}</glossary>` –¥–ª—è LLM –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- [glossary.yaml](../../config/glossary.yaml) ‚Äî 79 —Ç–µ—Ä–º–∏–Ω–æ–≤ —Å `canonical`, `description`, `variations`, `context`

### –§–∞–∑–∞ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–æ–Ω–≥—Ä–∏–¥–∞ –∏ –∏—Å—Ç–æ—Ä–∏–∏ ‚úÖ (v0.23)

> –¶–µ–ª—å: —à–∞–±–ª–æ–Ω + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è educational, 8 –±–ª–æ–∫–æ–≤ –¥–ª—è leadership

9. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å LongreadStage** ‚Äî 3-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ (system + instructions + template)
10. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å StoryStage** ‚Äî 8-–±–ª–æ—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è leadership
11. ‚úÖ **–í–µ—Ç–≤–ª–µ–Ω–∏–µ –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–µ** ‚Äî EDUCATIONAL ‚Üí longread+summarize, LEADERSHIP ‚Üí story
12. ‚úÖ **should_skip() –ø–∞—Ç—Ç–µ—Ä–Ω** ‚Äî —É—Å–ª–æ–≤–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤ –ø–æ content_type

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- `StoryGenerator`, `StoryStage` —Å 8 —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –±–ª–æ–∫–∞–º–∏
- –ü—Ä–æ–º–ø—Ç—ã: `longread_*.md`, `story_*.md` –≤ `config/prompts/`
- Frontend: `StoryView`, —É—Å–ª–æ–≤–Ω—ã–π pipeline –≤ `StepByStep`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/pipeline/05b-story.md`

### –§–∞–∑–∞ 4: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Å–ø–µ–∫—Ç–∞ ‚úÖ (v0.24)

> –¶–µ–ª—å: –∫–æ–Ω—Å–ø–µ–∫—Ç –∏–∑ cleaned (—Ç–æ–ª—å–∫–æ –¥–ª—è educational)

13. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å SummaryStage** ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ cleaned –≤–º–µ—Å—Ç–æ longread, depends_on = ["parse", "clean"]
14. ‚úÖ **3-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤** ‚Äî summary_system.md + summary_instructions.md + summary_template.md
15. ‚úÖ **LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é** ‚Äî topic_area, tags, access_level —Ç–µ–ø–µ—Ä—å –∏–∑ LLM
16. ‚úÖ **Breaking change API** ‚Äî `/step/summarize` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç cleaned_transcript –≤–º–µ—Å—Ç–æ longread

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- [summary_generator.py](../../backend/app/services/summary_generator.py) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –ø–æ–¥ CleanedTranscript
- [summarize_stage.py](../../backend/app/services/stages/summarize_stage.py) ‚Äî depends_on = ["parse", "clean"]
- [schemas.py:StepSummarizeRequest](../../backend/app/models/schemas.py) ‚Äî cleaned_transcript –≤–º–µ—Å—Ç–æ longread
- [fallback_factory.py](../../backend/app/services/pipeline/fallback_factory.py) ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –±–∞–≥–∏ section‚Üítopic_area
- –ü—Ä–æ–º–ø—Ç—ã: `config/prompts/summary_system.md`, `summary_instructions.md`, `summary_template.md`

### –§–∞–∑–∞ 5: –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ ‚úÖ (v0.25)

> –¶–µ–ª—å: –µ–¥–∏–Ω—ã–π —á–∞–Ω–∫–µ—Ä –ø–æ H2 –±–µ–∑ LLM

16. ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å chunk_by_h2()** ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ markdown –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º H2
17. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å ChunkStage** ‚Äî –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º, depends_on = ["parse", "longread", "story"]
18. ‚úÖ **–ò—Å—Ç–æ—á–Ω–∏–∫ —á–∞–Ω–∫–æ–≤** ‚Äî longread.md –¥–ª—è educational, story.md –¥–ª—è leadership
19. ‚úÖ **–£–¥–∞–ª–∏—Ç—å LLM-—á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ** ‚Äî —É–±—Ä–∞–Ω —Å—Ç–∞—Ä—ã–π –ø—Ä–æ–º–ø—Ç chunker.md –∏ chunker_gemma2.md

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- [h2_chunker.py](../../backend/app/utils/h2_chunker.py) ‚Äî `chunk_by_h2()` –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ H2 –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- [chunk_stage.py](../../backend/app/services/stages/chunk_stage.py) ‚Äî –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –±–µ–∑ AI client, `depends_on = ["parse", "longread", "story"]`
- [longread_stage.py](../../backend/app/services/stages/longread_stage.py) ‚Äî `depends_on = ["parse", "clean"]` (–±—ã–ª–æ "chunk")
- [longread_generator.py](../../backend/app/services/longread_generator.py) ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç CleanedTranscript –≤–º–µ—Å—Ç–æ chunks
- [orchestrator.py](../../backend/app/services/pipeline/orchestrator.py) ‚Äî –Ω–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫: Clean ‚Üí Longread ‚Üí Summary ‚Üí Chunk
- [progress_manager.py](../../backend/app/services/pipeline/progress_manager.py) ‚Äî CHUNKING weight = 2% (instant)
- [step_routes.py](../../backend/app/api/step_routes.py) ‚Äî `step_chunk()` —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç markdown_content
- –£–¥–∞–ª–µ–Ω—ã: `config/prompts/chunker.md`, `config/prompts/chunker_gemma2.md`

### –§–∞–∑–∞ 6: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤

> –¶–µ–ª—å: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–µ–Ω—è—Ç—å –ø—Ä–æ–º–ø—Ç—ã –±–µ–∑ –¥–µ–ø–ª–æ—è

20. **–°–æ–∑–¥–∞—Ç—å –≤–Ω–µ—à–Ω—é—é –ø–∞–ø–∫—É** `/mnt/main/work/bz2/video/prompts/` —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ø–æ —ç—Ç–∞–ø–∞–º
21. **–û–±–Ω–æ–≤–∏—Ç—å docker-compose.yml** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å volume `/prompts`
22. **–û–±–Ω–æ–≤–∏—Ç—å `load_prompt()`** ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ—à–Ω–µ–π –ø–∞–ø–∫–∏, fallback –Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ
23. **–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç—ã –∏ glossary.yaml** –≤–æ –≤–Ω–µ—à–Ω—é—é –ø–∞–ø–∫—É

### –§–∞–∑–∞ 7: Step API –∏ UI –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤

> –¶–µ–ª—å: –≤—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø—Ä–æ–º–ø—Ç–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ

24. **–î–æ–±–∞–≤–∏—Ç—å `prompt_variant` –≤ Step*Request** ‚Äî –≤—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø—Ä–æ–º–ø—Ç–∞
25. **API —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî endpoint –¥–ª—è —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
26. **–û–±–Ω–æ–≤–∏—Ç—å UI** ‚Äî dropdown –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ

### –§–∞–∑–∞ 8: –°–ª–∞–π–¥—ã

> –¶–µ–ª—å: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–æ —Å–ª–∞–π–¥–æ–≤ (–¥–ª—è –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)

27. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SlidesStage** ‚Äî vision model + –ø—Ä–æ–º–ø—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
28. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ pipeline** ‚Äî `cleaned + slides_extracted ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è`
29. **UI –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–∞–π–¥–æ–≤** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –∫ –≤–∏–¥–µ–æ

### –§–∞–∑–∞ 9: –û—á–µ—Ä–µ–¥—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–Ω–∞ –±—É–¥—É—â–µ–µ)

> –¶–µ–ª—å: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

30. **Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ pipeline –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ
31. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** ‚Äî –ø–∞–ø–∫–∞ —Å –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ + —Å–ª–∞–π–¥—ã
32. **API –æ—á–µ—Ä–µ–¥–∏** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
33. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî —Å—Ç–∞—Ç—É—Å, –æ—à–∏–±–∫–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –°–ª–∞–π–¥—ã —Ç—Ä–µ–±—É—é—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –†–µ—à–µ–Ω–∏–µ: –≤—Ö–æ–¥–Ω–∞—è –ø–∞–ø–∫–∞ —Å –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

| –§–∞–∑–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –°—Ç–∞—Ç—É—Å |
|------|-----------|-------------|--------|
| **–§–∞–∑–∞ 1** | üî¥ –í—ã—Å–æ–∫–∏–π | ‚Äî | ‚úÖ v0.21 ‚Äî ContentType, EventCategory, archive structure |
| **–§–∞–∑–∞ 2** | üî¥ –í—ã—Å–æ–∫–∏–π | –§–∞–∑–∞ 1 | ‚úÖ v0.22 ‚Äî –ì–ª–æ—Å—Å–∞—Ä–∏–π –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è LLM |
| **–§–∞–∑–∞ 3** | üî¥ –í—ã—Å–æ–∫–∏–π | –§–∞–∑–∞ 2 | ‚úÖ v0.23 ‚Äî –õ–æ–Ω–≥—Ä–∏–¥ –∏ –∏—Å—Ç–æ—Ä–∏—è |
| **–§–∞–∑–∞ 4** | üî¥ –í—ã—Å–æ–∫–∏–π | –§–∞–∑–∞ 2 | ‚úÖ v0.24 ‚Äî –ö–æ–Ω—Å–ø–µ–∫—Ç –∏–∑ cleaned, 3-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ |
| **–§–∞–∑–∞ 5** | üî¥ –í—ã—Å–æ–∫–∏–π | –§–∞–∑—ã 3-4 | ‚úÖ v0.25 ‚Äî –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ H2-—á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ –±–µ–∑ LLM |
| **–§–∞–∑–∞ 6** | üü° –°—Ä–µ–¥–Ω–∏–π | ‚Äî | ‚è≥ –£–¥–æ–±—Å—Ç–≤–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ |
| **–§–∞–∑–∞ 7** | üü° –°—Ä–µ–¥–Ω–∏–π | –§–∞–∑–∞ 6 | ‚è≥ UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ |
| **–§–∞–∑–∞ 8** | üü° –°—Ä–µ–¥–Ω–∏–π | –§–∞–∑—ã 1-5 | ‚è≥ –°–ª–∞–π–¥—ã |
| **–§–∞–∑–∞ 9** | üü¢ –ù–∏–∑–∫–∏–π | –§–∞–∑—ã 1-8 | ‚è≥ –ö–æ–≥–¥–∞ pipeline —Å—Ç–∞–±–∏–ª–µ–Ω |

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –û–∂–∏–¥–∞–µ–º–æ–µ |
|---------|---------|-----------|
| –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —á–∞–Ω–∫–æ–≤ | –í–∞—Ä—å–∏—Ä—É–µ—Ç—Å—è | 100% –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å |
| –ö–∞—á–µ—Å—Ç–≤–æ RAG-–æ—Ç–≤–µ—Ç–æ–≤ | –ë–∞–∑–æ–≤–æ–µ | –£–ª—É—á—à–µ–Ω–Ω–æ–µ (—Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ —á–∞–Ω–∫–∏) |
| –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ç–µ—Ä–º–∏–Ω–æ–≤ | ~80% | ~95%+ |
| –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ | –ë–∞–∑–æ–≤–æ–µ | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–∏–ª–∏ —É–ª—É—á—à–µ–Ω–∏–µ –∑–∞ —Å—á—ë—Ç –¥–µ—Ç–µ—Ä–º. —á–∞–Ω–∫–æ–≤–∞–Ω–∏—è) |

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### –û–±—É—á–∞—é—â–∏–µ —Ç–µ–º—ã (educational)
- [Educational_Longread_Instructions.md](../template%20prompts/Educational_Longread_Instructions.md) ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ª–æ–Ω–≥—Ä–∏–¥–∞
- [Educational_Longread_Template.md](../template%20prompts/Educational_Longread_Template.md) ‚Äî —à–∞–±–ª–æ–Ω –ª–æ–Ω–≥—Ä–∏–¥–∞
- [Educational_Summary_Instructions.md](../template%20prompts/Educational_Summary_Instructions.md) ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Å–ø–µ–∫—Ç–∞

### –õ–∏–¥–µ—Ä—Å–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ (leadership)
- [Leadership_Story_Instructions.md](../template%20prompts/Leadership_Story_Instructions.md) ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ª–∏–¥–µ—Ä—Å–∫–æ–π –∏—Å—Ç–æ—Ä–∏–∏
- [Leadership_Story_Template.md](../template%20prompts/Leadership_Story_Template.md) ‚Äî —à–∞–±–ª–æ–Ω 8 –±–ª–æ–∫–æ–≤

### –û–±—â–µ–µ
- [System_Prompts_Examples.md](../template%20prompts/System_Prompts_Examples.md) ‚Äî –ø—Ä–∏–º–µ—Ä—ã —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è pipeline
- [Slides_Extraction_Instructions.md](../template%20prompts/Slides_Extraction_Instructions.md) ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å–ª–∞–π–¥–æ–≤ (–¥–ª—è –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤)
- [docs/adr/005-result-caching.md](../adr/005-result-caching.md) ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [docs/pipeline/stages.md](../pipeline/stages.md) ‚Äî —Ç–µ–∫—É—â–∞—è stage-–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è
