---
doc_type: how-to
ai_scope: none
status: active
created: 2026-01-23
updated: 2026-01-23
tags:
  - documentation
  - meta
  - workflow
---

# Audit Process

> Как проводить аудит документации проекта.

---

## Когда проводить аудит

| Триггер | Тип аудита | Результат |
|---------|------------|-----------|
| Крупный релиз (major/minor) | Полный | baseline-YYYY-MM.md |
| Раз в квартал | Плановый | baseline-YYYY-MM.md |
| Подозрение на рассинхрон | Точечный | Обновление документов |
| Перед рефакторингом документации | Полный | documentation-analysis.md |

> [!tip] Признаки необходимости аудита
> - Claude Code даёт устаревшие рекомендации
> - При чтении документации замечаете несоответствия
> - Добавлено много фич без обновления документации

---

## Типы аудита

### Baseline (состояние)

**Цель:** Зафиксировать текущее состояние документации.

**Результат:** `docs/audit/baseline-YYYY-MM-DD.md`

**Содержимое:**
- Список всех документов со статусами
- Статистика: актуальны / устарели / требуют ревью
- Рекомендации по приоритетам обновления

---

### Documentation Analysis (глубокий анализ)

**Цель:** Классифицировать документы по Diátaxis+, найти проблемы структуры.

**Результат:** `docs/meta/artifacts/documentation-analysis.md`

**Содержимое:**
- Классификация каждого документа (тип, аудитория)
- Оценка состояния и полноты
- Граф зависимостей
- Рекомендации по реструктуризации

---

### Architecture Summary (карта для агентов)

**Цель:** Создать компактную карту архитектуры для AI-агентов.

**Результат:** `docs/audit/architecture-summary.md`

**Содержимое:**
- Карта компонентов
- Сводка ADR
- Точки расширения
- Чеклист для новых фич

---

## Процесс: Baseline аудит

### Шаг 1: Подготовка

Убедитесь, что в проекте актуальная версия кода:

```bash
git pull
git status  # чистое состояние
```

### Шаг 2: Запуск в Claude Code

> [!note] Промпт для Claude Code
> ````
> Проведи аудит документации проекта.
> 
> ## Задача
> Создай docs/audit/baseline-YYYY-MM-DD.md (подставь текущую дату)
> 
> ## Frontmatter документа
> ```yaml
> ---
> doc_type: audit
> status: active
> created: YYYY-MM-DD
> updated: YYYY-MM-DD
> version: vX.XX.X
> tags:
>   - audit
>   - documentation
> ---
> ```
> 
> ## Для каждого .md файла в docs/ определи:
> 
> 1. **Последнее изменение** — дата и версия из git или содержимого
> 2. **Статус:**
>    - Актуален — соответствует текущему коду
>    - Частично устарел — есть расхождения
>    - Требует ревью — давно не обновлялся, нужна проверка
>    - Архивный — ожидаемо устаревший (proposals, старые исследования)
> 
> 3. **Расхождения** (если есть) — конкретно что не соответствует
> 
> ## Как проверять актуальность:
> - Сравни описанные API endpoints с реальными в коде
> - Проверь упомянутые файлы/модули — существуют ли
> - Сверь конфигурационные параметры с текущими defaults
> - Проверь версии зависимостей если упомянуты
> 
> ## Формат результата:
> 
> ### Сводка
> Таблица: Статус | Количество
> 
> ### Детали по разделам
> Для каждого документа:
> - Путь
> - Последнее изменение
> - Статус
> - Комментарий / расхождения
> 
> ### Рекомендации
> Приоритизированный список что обновить
> ````

### Шаг 3: Ревью результата

- Проверьте, что Claude Code правильно определил статусы
- Скорректируйте если нужно
- Сохраните файл

### Шаг 4: Планирование обновлений

На основе рекомендаций создайте задачи на обновление документов с высоким приоритетом.

---

## Процесс: Documentation Analysis

### Шаг 1: Подготовка

Убедитесь, что:
- Есть актуальный baseline
- Прочитан [Diátaxis+ Framework](../framework.md)

### Шаг 2: Запуск в Claude Code

> [!note] Промпт для Claude Code
> ```
> Проведи глубокий анализ документации проекта.
> 
> ## Контекст
> Прочитай docs/meta/framework.md — это наш фреймворк классификации.
> 
> ## Задача
> Создай docs/meta/artifacts/documentation-analysis.md
> 
> ## Frontmatter документа
> ```yaml
> ---
> doc_type: audit
> ai_scope: none
> status: active
> created: YYYY-MM-DD
> updated: YYYY-MM-DD
> tags:
>   - documentation
>   - meta
>   - audit
> ---
> ```
> 
> ## Для каждого .md файла в docs/ (кроме docs/meta/) определи:
> 
> 1. **Тип по Diátaxis+:**
>    tutorial | how-to | reference | explanation | adr | proposal | audit
> 
> 2. **Аудитория:**
>    developer | ai-agent | ops (может быть несколько)
> 
> 3. **Состояние:**
>    - Актуальность: актуален / частично устарел / устарел
>    - Полнота: полный / неполный / избыточный
> 
> 4. **Зависимости:**
>    - На какие документы ссылается
>    - Какие документы ссылаются на него
>    - Связь с кодом (какие файлы/модули описывает)
> 
> 5. **Проблемы** (если есть):
>    - Смешение типов
>    - Дублирование
>    - Несоответствие аудитории
> 
> 6. **Рекомендация:**
>    оставить | обновить | объединить с X | разделить | архивировать
> 
> ## Формат результата
> 
> ### Сводка
> - Распределение по типам Diátaxis+
> - Распределение по аудиториям
> - Общие проблемы
> 
> ### Анализ по документам
> Для каждого документа — структурированная карточка
> 
> ### Рекомендации по реструктуризации
> - Документы для объединения
> - Документы для разделения
> - Пробелы (чего не хватает)
> - Приоритеты обновления
> ```

### Шаг 3: Ревью и план действий

На основе анализа:
1. Согласуйте рекомендации
2. Создайте план реструктуризации (если нужен)
3. Приоритизируйте задачи

---

## Процесс: Architecture Summary

### Шаг 1: Подготовка

Убедитесь, что:
- Есть актуальные ADR
- Код соответствует документации (или знаете расхождения)

### Шаг 2: Запуск в Claude Code

> [!note] Промпт для Claude Code
> ```
> Создай карту архитектуры для AI-агентов.
> 
> ## Задача
> Создай docs/audit/architecture-summary.md
> 
> ## Frontmatter документа
> ```yaml
> ---
> doc_type: reference
> status: active
> created: YYYY-MM-DD
> updated: YYYY-MM-DD
> audience: [developer, ai-agent]
> tags:
>   - architecture
>   - reference
> ---
> ```
> 
> Этот документ — компактная "шпаргалка" для AI-агентов при анализе архитектуры.
> 
> ## Включи:
> 
> ### 1. Карта компонентов
> Таблица: Компонент | Файл/Модуль | Ответственность | Зависит от
> 
> ### 2. Сводка ADR
> Таблица: ADR | Название | Статус | Ключевое решение | Затронутые компоненты
> 
> Для каждого ADR — одно предложение с сутью решения.
> 
> ### 3. Ключевые потоки данных
> Схема pipeline или основных процессов (текстом или mermaid)
> 
> ### 4. Точки расширения
> Где архитектура предусматривает добавление нового:
> - Как добавить новый этап pipeline
> - Как добавить нового AI провайдера
> - Как добавить новый формат вывода
> 
> ### 5. Ограничения и компромиссы
> - Технические ограничения
> - Архитектурные компромиссы (со ссылками на ADR)
> - Известный техдолг
> 
> ### 6. Чеклист для новых фич
> Что проверить перед реализацией:
> - [ ] Какие ADR затрагивает?
> - [ ] Какие модули изменятся?
> - [ ] Нужен ли новый ADR?
> - [ ] Какие документы обновить?
> 
> ## Требования к формату:
> - Компактно — агент должен быстро найти нужное
> - Структурировано — таблицы, списки, не простыни текста
> - Со ссылками — на ADR, документы, код
> ```

### Шаг 3: Валидация

Проверьте, что карта:
- Покрывает все ключевые компоненты
- ADR сводка точная
- Точки расширения актуальны

---

## Артефакты аудита

| Артефакт | Расположение | Аудитория | Обновление |
|----------|--------------|-----------|------------|
| Baseline | `docs/audit/baseline-YYYY-MM-DD.md` | developer | Новый файл каждый раз |
| Documentation Analysis | `docs/meta/artifacts/documentation-analysis.md` | developer | Перезаписывается |
| Architecture Summary | `docs/audit/architecture-summary.md` | developer, ai-agent | Перезаписывается |

> [!warning] Baseline не перезаписывается
> Каждый baseline — отдельный файл для истории. Старые можно архивировать.

> [!note] Разница в расположении
> - **Baseline и Architecture Summary** в `docs/audit/` — проектные документы, AI-агенты могут их читать
> - **Documentation Analysis** в `docs/meta/artifacts/` — мета-документация для человека

---

## После аудита

### Обновление документации

1. Создайте задачи на обновление по приоритетам из аудита
2. Используйте [Update Workflow](update.md) для каждого документа
3. После обновления — отметьте в baseline или создайте новый

### Обновление MOC

Если аудит выявил изменения в структуре — обновите [MOC](../MOC%20-%20Управление%20документацией.md).

---

## Чеклист аудита

```
□ Определить тип аудита (baseline / analysis / summary)
□ Подготовить промпт для Claude Code
□ Запустить аудит
□ Ревью результата
□ Скорректировать если нужно
□ Создать задачи на обновление
□ Обновить статусы в MOC
```

---

## Changelog

| Дата | Изменение |
|------|-----------|
| 2026-01-23 | Architecture Summary перемещён в docs/audit/, формат baseline YYYY-MM-DD |
| 2026-01-23 | Добавлены требования к frontmatter в промптах |
| 2026-01-23 | Создан документ |
