---
doc_type: how-to
ai_scope: none
status: active
created: 2026-01-24
updated: 2026-01-24
tags:
  - documentation
  - meta
  - integration
---

# Интеграция агентов в CLAUDE.md

> Инструкция по добавлению doc-sync и arch-checker в основной файл инструкций проекта.

---

## Что добавить в CLAUDE.md

### Раздел: Управление документацией

Добавьте следующий блок в CLAUDE.md (рекомендуется после раздела с архитектурой или перед разделом с командами):

```markdown
## Управление документацией

Проект использует систему Diátaxis+ для организации документации.
Подробности: `docs/meta/MOC - Управление документацией.md`

### После изменений в коде

Определи какие документы требуют обновления:

```
Используй docs/meta/agents/doc-sync.md
Изменённые файлы: {список из git diff --name-only}
```

### Перед реализацией новой фичи

Проверь соответствие архитектуре:

```
Используй docs/meta/agents/arch-checker.md
Фича: {описание}
```

### Ключевые документы

| Что | Где |
|-----|-----|
| Карта архитектуры | `docs/audit/architecture-summary.md` |
| API reference | `docs/api-reference.md` |
| Pipeline stages | `docs/pipeline/stages.md` |
| ADR (решения) | `docs/adr/` |
| Конфигурация | `docs/configuration.md` |
```

---

### Раздел: Workflow для новых фич

Добавьте или обновите раздел про процесс разработки:

```markdown
## Workflow: Новая фича

### 1. Проверка архитектуры
```
Используй docs/meta/agents/arch-checker.md
Фича: {описание того, что хочу реализовать}
```

### 2. Реализация
- Следуй рекомендациям arch-checker
- Используй существующие паттерны из ADR

### 3. Синхронизация документации
```
Используй docs/meta/agents/doc-sync.md
Изменённые файлы: {список}
```

### 4. Обновление документов
Для каждого документа из списка doc-sync:
- Используй промпты из `docs/meta/workflows/update.md`

### 5. Новый ADR (если нужен)
Если arch-checker рекомендует создать ADR:
- Номер: следующий после последнего в `docs/adr/`
- Формат: `NNN-краткое-название.md`
- Шаблон: Контекст → Решение → Последствия → Альтернативы
```

---

## Минимальная версия

Если CLAUDE.md уже большой, добавьте только ссылку:

```markdown
## Документация

При изменениях в коде используй агентов синхронизации:
- `docs/meta/agents/doc-sync.md` — какие документы обновить
- `docs/meta/agents/arch-checker.md` — проверка архитектуры

Подробнее: `docs/meta/MOC - Управление документацией.md`
```

---

## Проверка интеграции

После добавления в CLAUDE.md проверьте:

1. **Агенты доступны**
   ```
   Какие документы нужно обновить после изменения в backend/app/api/routes.py?
   ```
   Ожидаемый ответ: Claude использует doc-sync и выдаёт api-reference.md, pipeline/09-api.md

2. **Архитектурная проверка работает**
   ```
   Хочу добавить новый stage "translate". Что нужно учесть?
   ```
   Ожидаемый ответ: Claude использует arch-checker и выдаёт чеклист по ADR-001, ADR-002, etc.

---

## Связанные документы

- [doc-sync](agents/doc-sync.md) — агент синхронизации
- [arch-checker](agents/arch-checker.md) — агент проверки архитектуры
- [MOC](MOC%20-%20Управление%20документацией.md) — карта документации

---

## Changelog

| Дата | Изменение |
|------|-----------|
| 2026-01-24 | Создан документ |
